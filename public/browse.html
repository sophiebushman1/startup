<main>
    <body>
        <head>
            <link rel="stylesheet" href="browse.css">
        </head>
      
        <header>
            <h1>Cocojewel</h1>
            <h2>Welcome <span id="user-name">USER</span></h2> <!-- Placeholder for the username -->
            <nav>
                <a href="cart.html" id="cart-link">Cart & Checkout</a>
            </nav>
        </header>
    
        <section id="products">
            <div class="product-grid">
                <!-- Existing Products -->
                <div class="product-item" data-product-id="1" data-product-name="Blue Gold Bead Bracelet" data-product-price="15">
                    <img src="https://tresorsdestbarth.com/wp-content/uploads/2022/06/double-wrap-leather-bracelet-with-turquoise-and-solid-18k-gold-beads-and-clasp-rare-turquoise-from-arizona-jewelry-from-st-barth-island-62aa47e3-400x400.jpg" alt="Blue Gold Bead Bracelet" width="150">
                    <p>Blue Gold Bead Bracelet - $15</p>
                    <button onclick="addToCart(1, 'Blue Gold Bead Bracelet', 15)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="2" data-product-name="Seaglass Drop Earrings" data-product-price="20">
                    <img src="https://www.yinahawaii.com/cdn/shop/products/65b956c1a5efcf8dcacabd2c_1024x1024.png?v=1707544202" alt="Seaglass Drop Earrings" width="150">
                    <p>Seaglass Drop Earrings - $20</p>
                    <button onclick="addToCart(2, 'Seaglass Drop Earrings', 20)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="3" data-product-name="Gold Charm Necklace" data-product-price="25">
                    <img src="https://i.etsystatic.com/29155269/r/il/d059fd/5926528134/il_fullxfull.5926528134_dv8m.jpg" alt="Gold Charm Necklace" width="150">
                    <p>Gold Charm Necklace - $25</p>
                    <button onclick="addToCart(3, 'Gold Charm Necklace', 25)">Add to Cart</button>
                </div>
                
                <!-- New Products (Placeholders) -->
                <div class="product-item" data-product-id="4" data-product-name="Colorful Starfish Necklace" data-product-price="30">
                    <img src="/images/starfish.png" alt="Colorful Starfish Necklace" width="150">
                    <p>Colorful Starfish Necklace - $30</p>
                    <button onclick="addToCart(4, 'Colorful Starfish Necklace', 30)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="5" data-product-name="Gold Shell Ring" data-product-price="40">
                    <img src="images/shellring.png" alt="Gold Shell Ring" width="150">
                    <p>Gold Shell Ring - $40</p>
                    <button onclick="addToCart(5, 'Gold Shell Ring', 40)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="6" data-product-name="Big Gold Leaf Earrings" data-product-price="18">
                    <img src="images/earring.png" alt="Big Gold Leaf Earrings" width="150">
                    <p>Big Gold Leaf Earrings - $18</p>
                    <button onclick="addToCart(6, 'Big Gold Leaf Earrings', 18)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="7" data-product-name="Blue Wave Ring" data-product-price="22">
                    <img src="images/wavering.png" alt="Blue Wave Ring" width="150">
                    <p>Blue Wave Ring - $22</p>
                    <button onclick="addToCart(7, 'Blue Wave Ring', 22)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="8" data-product-name="Sand Dollar Necklace" data-product-price="28">
                    <img src="images/sanddollar.jpeg" alt="Sand Dollar Necklace" width="150">
                    <p>Sand Dollar Necklace - $28</p>
                    <button onclick="addToCart(8, 'Sand Dollar Necklace', 28)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="9" data-product-name="Gold & Turquoise Bengal" data-product-price="35">
                    <img src="images/bengal.png" alt="Gold & Turquoise Bengal" width="150">
                    <p>Gold & Turquoise Bengal - $35</p>
                    <button onclick="addToCart(9, 'Gold & Turquoise Bengal', 35)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="10" data-product-name="Shell Dangle Earrings" data-product-price="17">
                    <img src="images/blueshell.png" alt="Shell Dangle Earrings" width="150">
                    <p>Shell Dangle Earrings - $17</p>
                    <button onclick="addToCart(10, 'Shell Dangle Earrings', 17)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="11" data-product-name="Natural Pearl Bracelet" data-product-price="49">
                    <img src="images/bracelet.png" alt="Natural Pearl Bracelet" width="150">
                    <p>Natural Pearl Bracelet - $49</p>
                    <button onclick="addToCart(11, 'Natural Pearl Bracelet', 49)">Add to Cart</button>
                </div>
                <div class="product-item" data-product-id="12" data-product-name="Simple Shell Necklace" data-product-price="25">
                    <img src="images/necklace.png" alt="Simple Shell Necklace" width="150">
                    <p>Simple Shell Necklace - $25</p>
                    <button onclick="addToCart(12, 'Simple Shell Necklace', 25)">Add to Cart</button>
                </div>
            </div>
        </section>
    
        <footer>
            <a href="https://github.com/sophiebushman1/startup">My Github Repo</a>
            <p>Created by Sophia Bushman</p>
        </footer>
    
        <style>
            /* CSS code for the layout */
        </style>
    
        <script>
            // Clear the cart if it's a new session or no user is logged in
            const username = localStorage.getItem('userName');
            
            // If no username exists, we assume it's a new or guest user, so clear the cart
            if (!username) {
                localStorage.removeItem('cart');  // Clear cart if no user is logged in
            }
            
            // Check if the user has logged in
            if (username) {
                document.getElementById('user-name').textContent = username;
                // Ensure that every time a user logs in, the cart is reset to empty
                localStorage.setItem('cart', JSON.stringify([]));  // Clear cart when user logs in
            } else {
                document.getElementById('user-name').textContent = 'Guest';
            }
        
            // Function to add items to the cart and update cart count in header
            function addToCart(productId, productName, productPrice) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                const product = { productId, productName, productPrice };
    
                // Check if product is already in the cart
                const existingProductIndex = cart.findIndex(item => item.productId === productId);
    
                if (existingProductIndex !== -1) {
                    cart[existingProductIndex].quantity += 1;  // Increment quantity if already in cart
                } else {
                    product.quantity = 1;
                    cart.push(product);  // Add new product to cart
                }
    
                localStorage.setItem('cart', JSON.stringify(cart));  // Save updated cart in localStorage
    
                // Update cart link text with item count
                updateCartCount();
            }
    
            // Function to update cart count in the header
            function updateCartCount() {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const cartCount = cart.reduce((total, item) => total + item.quantity, 0);
                const cartLink = document.getElementById('cart-link');
                if (cartCount > 0) {
                    cartLink.textContent = `Cart (${cartCount}) & Checkout`;
                } else {
                    cartLink.textContent = `Cart & Checkout`;
                }
            }
    
            // Initial update of cart count when the page loads
            window.onload = updateCartCount;
        </script>
    </body>
</main>
